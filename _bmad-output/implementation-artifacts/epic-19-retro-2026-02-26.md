# Rétrospective Epic 19 — Guide de Lecture & Géocodage Canonique

**Date :** 2026-02-26
**Epic :** 19 — Comment lire ton thème natal dans l'app (Guide + Géocodage + Persistance canonique)
**Facilité par :** Bob (Scrum Master)
**Participants :** Cyril (Project Lead), Alice (PO), Charlie (Senior Dev), Dana (QA), Elena (Junior Dev)

---

## RÉSUMÉ EPIC 19

### Métriques de livraison

| Métrique | Valeur |
|----------|--------|
| Stories complétées | 6/6 (100%) |
| Tests | 1070/1070 passants (100%) |
| Régressions | 0 |
| Cycles de code review | Trop nombreux (jugé excessif malgré code prémâché) |
| Intervention manuelle | Jugée trop fréquente par Cyril |

### Objectifs atteints

- Guide pédagogique NatalChartGuide avec traductions i18n ✅
- Backend Geocoding Proxy Nominatim (plus d'appel direct front) ✅
- Cache de recherche SHA256 sans PII ✅
- Table canonique `geo_place_resolved` pour reproductibilité ✅
- FK `birth_place_resolved_id` sur profil natal ✅
- Mode `accurate` avec erreur 422 métier ✅

---

## CE QUI A BIEN MARCHÉ

1. **Architecture de persistance stable** — La séparation cache de recherche (TTL) et stockage canonique (`PlaceResolved`) est robuste.
2. **Couverture de tests front** — On est passé à 1070 tests, ce qui garantit une stabilité du guide et du flux de géocodage.
3. **Pacte de Rigueur (v1)** — L'introduction des preuves techniques a aidé à cadrer les stories, même si l'exécution reste imparfaite.

---

## DÉFIS ET CHALLENGES (AUTO-CRITIQUE)

### 1. Sentiment de "Bof" du Project Lead

L'exécution de l'Épique 19 a été perçue comme un manque de rigueur. Malgré du code "prémâché" (Dev Notes très précises), l'équipe a fait des erreurs d'attention et d'intention, générant des allers-retours inutiles en review.

**Root Causes :**
- Copier-coller irréfléchi du code proposé.
- Manque de compréhension profonde de l'intention métier.
- Auto-contrôle insuffisant avant sollicitation du Lead.

### 2. Guide "Maquette → Code" (Encore un raté)

L'Action Item de l'Épique 18 n'a toujours pas été livré, malgré son statut de "bloquant" théorique pour l'Épique 19.

---

## ACTION ITEMS (PACT DE RIGUEUR V2)

### Améliorations Process (Priorité P0)

**1. Validation d'Intention avant Code**
- **Description** : Avant de coder, l'agent doit rédiger un court résumé de sa compréhension de l'intention de la story et poser au moins une question de clarification. Bloquant pour tout commit.
- **Owner** : Bob (SM)
- **Succès** : Moins de 2 cycles de review par story.

**2. Couverture 100% du Code Modifié**
- **Description** : Fournir un rapport de couverture montrant que 100% des lignes ajoutées ou transformées par la story sont couvertes par des tests.
- **Owner** : Dana (QA)
- **Succès** : Zéro bug de régression ou de logique non testée en review.

**3. Guide "Maquette → Code" (Clôture Finale)**
- **Description** : Création immédiate de `docs/guidelines/mockup-to-code.md`.
- **Owner** : Charlie (Senior Dev)
- **Deadline** : Bloquant AVANT de commencer la Story 20.1.

---

## READINESS ASSESSMENT EPIC 19

| Dimension | Statut | Notes |
|-----------|--------|-------|
| Tests | ✅ 1070/1070 | |
| Régressions | ✅ 0 | |
| Déploiement | ✅ Prêt | |
| Stakeholders | ✅ Accepté | Sous réserve de rigueur accrue sur l'intention |
| Codebase | ✅ Solide | Prête pour Swiss Ephemeris |
| Blockers | ✅ Aucun | |

---

## PROCHAINES ÉTAPES (ÉPIQUE 20)

1. Création de `docs/guidelines/mockup-to-code.md` (Charlie).
2. Lancement Épique 20 : Swiss Ephemeris.
3. Application du Pacte de Rigueur V2 (Intention + Couverture 100%).

---

## MOT DE CLÔTURE

> *"On a eu le code prémâché, on n'a pas eu l'intention. Pour l'Épique 20, on aura l'intention et la preuve par le test."* — Bob (Scrum Master)
