# Epic 1 Retrospective - 2026-02-20

## Scope
Stories 1.1 to 1.5 (socle backend, referentiel astrologique, calcul natal, tracabilite).

## What Went Well
- Base technique stable (FastAPI + SQLAlchemy + Alembic + tests).
- Referentiel versionne et controle des incoherences critiques.
- Tra√ßabilite resultat/regles mise en place tot dans le cycle.

## What Was Painful
- Plusieurs boucles de correction sur contrats d erreur et RBAC.
- Durcissement progressif des migrations et garde-fous DB.

## Key Lessons
- Poser les contraintes d integrite DB des le debut reduit fortement la dette.
- Les tests d integration API doivent couvrir explicitement les cas 401/403/404/422.

## Action Items
1. Conserver un template unique de reponse erreur (`code/message/details/request_id`) sur tous les routeurs.
2. Garder des tests de migration up/down dans les stories infra.
3. Exiger validation referentiel avant tout calcul metier.
